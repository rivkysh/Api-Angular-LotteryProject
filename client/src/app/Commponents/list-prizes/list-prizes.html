<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
<button class="add-btn" id="addNewPrize" (click)="addNewPrize()"><i class="bi bi-gift"></i>הוספת מתנה</button>

<div class="prizes-container">
    @for (gift of allprizes; track gift.id) {
    <div class="gift-card">
        <div class="image-wrapper">
            <img [src]="gift.imgUrl" [alt]="gift.name">
            <div class="price-badge">{{ gift.price }} ₪</div>
            
            <div class="action-icons-top">
                <button class="draw-icon-btn"  [disabled]="gift.islottered" (click)="$event.stopPropagation(); runDraw(gift.id)" title="בצע הגרלה">
                    <i class="bi bi-trophy-fill"></i>
                </button>
                <div class="delete-gift-btn" (click)="deletePrize(gift.id)" title="מחיקה">
                    <i class="bi bi-trash3"></i>
                </div>
            </div>
        </div>

        <div class="card-content">
            <h3 class="gift-title">{{ gift.name }}</h3>
            <p class="gift-description">{{ gift.description }}</p>
 @if (gift.islottered) {
          <div class="winner-section">
            <span class="winner-label">הזוכה המאושר/ת:</span>
            <span class="winner-name">{{ gift.thewinner.name || 'טרם עודכן' }}</span>
            <div class="closed-notice">המכירה סגורה</div>
          </div>
        } @else {
            <button class="add-btn update-style" (click)="updatePrize(gift.id,gift) ">
                <i class="bi bi-pencil-square"></i> עדכון
            </button>

            <button class="add-btn delete-style" (click)="GetParticipantsList(gift.id)">
                <i class="bi bi-people-fill"></i>רשימת רוכשים
            </button>

            <button class="add-btn delete-style" (click)="GetDonorDetails(gift.id)">
                <i class="bi bi-person-badge-fill"></i>פרטי תורם המתנה
            </button> 
        }
        </div>
      
    </div>
    }
</div>

@if(degel){ <app-add-new-prize (closeMe)="onCloseDialog()"></app-add-new-prize> }
@if(openUpdateDialog){ <app-update-prize [prizeToEdit]="thisPrize" [id]="id" (closeMe)="onCloseDialog()"></app-update-prize> }
@if(openDonerDetails){ <app-donor-details [donorDetails]="theDonerDetails" (closeMe)="onCloseDialogDonerDetails()"></app-donor-details> }
@if(openUsers){ <app-get-purchases [purchasers]="usersList" (closeMe)="onCloseDialogUsers()"></app-get-purchases> }